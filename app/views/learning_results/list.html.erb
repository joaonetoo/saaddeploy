
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.1.135/jspdf.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/2.0.16/jspdf.plugin.autotable.js"></script>

<%= javascript_include_tag "createPdf"%>
<%= javascript_include_tag "createCsv"%>
<div class="panel panel-default">
<div class="panel-heading">
<center><h4>Analisar estilos de aprendizagem</h4></center>

         <%= form_tag(show_by_date_learning_results_path(format: :xlsx), method: 'post') do %>
            <% if @allUsers == false %>
              <%= hidden_field_tag "selecao", @selecao %>
              <%= hidden_field_tag "allUsers", @allUsers %>
              <% @users.map(&:id).each do |u| %>
                <%= hidden_field_tag "users[]", u %>
              <% end %>
              <% @results.map(&:id).each do |id| %>
              <%= hidden_field_tag "results[]", id %>
              <% end %>
            <% else  %>
                   <%= hidden_field_tag "allUsers", @allUsers %>
                    <% @users.map(&:id).each do |uu| %>
                      <%= hidden_field_tag "users[]", uu %>
                    <% end %>

            <% end %>
            <%= button_tag(type: "submit",class: "btn btn-success btn-circle pull-right", style:  "margin-top : -35px; margin-left: -35px") do %>
                      <i class="fa  fa-file-excel-o "></i>
            <% end %>

 <% end %>
        <div id='exports'>
        </div>

</div>

<div class="row mt">
  <div class="col-lg-12">

  <div class="panel-body">
      <%= form_tag(show_by_date_learning_results_path, method: 'post', :remote => true) do %>
      <% if @allUsers == false %>
        <%= hidden_field_tag "selecao", @selecao %>
        <%= hidden_field_tag "allUsers", @allUsers %>
        <% @users.map(&:id).each do |u| %>
          <%= hidden_field_tag "users[]", u %>
        <% end %>
        <div class= "row mt">
        <div class="col-lg-2" style="right: -450px">
          <center><%= select_tag(:data_final, options_for_select(@datas),:class => "form-control") %></center>

        <% @results.map(&:id).each do |id| %>
        <%= hidden_field_tag "results[]", id %>
        <% end %>
          </div>
        </div>
        </br>
        <% end %>
      <% if @allUsers == true  %>
             <%= hidden_field_tag "allUsers", @allUsers %>
              <% @users.map(&:id).each do |uu| %>
                <%= hidden_field_tag "users[]", uu %>
              <% end %>

      <% end %>

        <center><%= submit_tag "Visualizar", class: "btn btn-login"%></center>

          <div class="row mt tab-pane hidden" id="chartjs">
            <div class="col-lg-6">
                <div class="panel-body text-center">
                  <div id="graphic"></div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="panel-body text-center">
                  <div id="graphic2"></div>
                </div>
            </div>
          </div>

          <div class="row mt">
            <div class="col-lg-12">
                <center><h4><%= @selecao %></h4></center>
                <section id="unseen">
                  <div id = "dados">
                  <table class="table table-bordered table-striped table-condensed">
              <thead>
                <tr>
                <th>Usuário</th>
                <th>Data final</th>
                <th>Instituição</th>
                <th>Campus</th>
                <th>Centro</th>
                <th>Curso</th>
                <th>Ec</th>
                <th>Or</th>
                <th>Ca</th>
                <th>Ea</th>
                <th style="display:none;">q1a</th>
                <th style="display:none;">q1b</th>
                <th style="display:none;">q1c</th>
                <th style="display:none;">q1d</th>
                <th style="display:none;">q2a</th>
                <th style="display:none;">q2b</th>
                <th style="display:none;">q2c</th>
                <th style="display:none;">q2d</th>
                <th style="display:none;">q3a</th>
                <th style="display:none;">q3b</th>
                <th style="display:none;">q3c</th>
                <th style="display:none;">q3d</th>
                <th style="display:none;">q4a</th>
                <th style="display:none;">q4b</th>
                <th style="display:none;">q4c</th>
                <th style="display:none;">q4d</th>
                <th style="display:none;">q5a</th>
                <th style="display:none;">q5b</th>
                <th style="display:none;">q5c</th>
                <th style="display:none;">q5d</th>
                <th style="display:none;">q6a</th>
                <th style="display:none;">q6b</th>
                <th style="display:none;">q6c</th>
                <th style="display:none;">q6d</th>
                <th style="display:none;">q7a</th>
                <th style="display:none;">q7b</th>
                <th style="display:none;">q7c</th>
                <th style="display:none;">q7d</th>
                <th style="display:none;">q8a</th>
                <th style="display:none;">q8b</th>
                <th style="display:none;">q8c</th>
                <th style="display:none;">q8d</th>
                <th style="display:none;">q9a</th>
                <th style="display:none;">q9b</th>
                <th style="display:none;">q9c</th>
                <th style="display:none;">q9d</th>
                <th style="display:none;">q10a</th>
                <th style="display:none;">q10b</th>
                <th style="display:none;">q10c</th>
                <th style="display:none;">q10d</th>
                <th style="display:none;">q11a</th>
                <th style="display:none;">q11b</th>
                <th style="display:none;">q11c</th>
                <th style="display:none;">q11d</th>
                <th style="display:none;">q12a</th>
                <th style="display:none;">q12b</th>
                <th style="display:none;">q12c</th>
                <th style="display:none;">q12d</th>
                </tr>
              </thead>
              <tbody  id="list">
              </tbody>
            </table>
            </div>
            </section>
            </div>
          </div>
                          <% end %>

      </div>
  </div>
          </div>
